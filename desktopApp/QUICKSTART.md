# Kuikly Desktop - å¿«é€Ÿå¼€å§‹ ğŸš€

## âœ… æˆåŠŸè¿è¡Œï¼

Kuikly æ¡Œé¢ç«¯å·²æˆåŠŸå®ç°å¹¶è¿è¡Œï¼åŸºäº **JCEF (Chromium å†…æ ¸)**ï¼Œæä¾›å®Œæ•´çš„ç°ä»£ Web æ”¯æŒã€‚

## ğŸ¯ å½“å‰çŠ¶æ€

- âœ… **JCEF é›†æˆå®Œæˆ** - Chromium 122.0.6261.112
- âœ… **çª—å£æ˜¾ç¤ºæ­£å¸¸** - 1200x800 åˆ†è¾¨ç‡
- âœ… **JS Bridge å·²æ³¨å…¥** - æ”¯æŒ Web â†” JVM åŒå‘é€šä¿¡
- âœ… **é¡µé¢åŠ è½½æˆåŠŸ** - `http://localhost:8080/?page_name=router`
- âœ… **Java 17 å…¼å®¹** - å·²è§£å†³æ¨¡å—ç³»ç»Ÿæƒé™é—®é¢˜

## ğŸƒ ä¸€é”®å¯åŠ¨

```bash
# ç¡®ä¿ dev server å’Œ h5App åœ¨è¿è¡Œ
# ç»ˆç«¯ 1:
npm run serve

# ç»ˆç«¯ 2:
./gradlew :h5App:jsBrowserDevelopmentRun -t

# ç»ˆç«¯ 3:
./gradlew :desktopApp:run
```

## ğŸ“± ä½ ä¼šçœ‹åˆ°

æ‰“å¼€ä¸€ä¸ªåä¸º **"Kuikly Desktop"** çš„çª—å£ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Kuikly Desktop            â”€ â–¡ Ã—    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚     [Web å†…å®¹åœ¨è¿™é‡Œæ¸²æŸ“]              â”‚
â”‚     (æ¥è‡ª localhost:8080)            â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       1200 x 800 åƒç´ 
```

## ğŸ”§ æ ¸å¿ƒæŠ€æœ¯

### æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Desktop App (JVM)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Logic     â”‚   Render    â”‚  â”‚
â”‚  â”‚   (JVM)     â”‚ (Chromium)  â”‚  â”‚
â”‚  â”‚             â”‚             â”‚  â”‚
â”‚  â”‚ core + demo â”‚ core-render â”‚  â”‚
â”‚  â”‚             â”‚   -web      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚  JS Bridge  â”‚         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®å®ç°

**1. JVM å‚æ•°ï¼ˆè‡ªåŠ¨é…ç½®ï¼‰**
```gradle
--add-opens java.desktop/sun.awt=ALL-UNNAMED
--add-opens java.desktop/java.awt=ALL-UNNAMED
--add-opens java.desktop/java.awt.peer=ALL-UNNAMED
-Xmx1024m
```

**2. JS Bridge æ³¨å…¥**
```javascript
// Web â†’ JVM
window.callKotlinMethod(methodId, ...args)

// JVM â†’ Web
com.tencent.kuikly.core.nvi.registerCallNative(pagerId, callback)
```

**3. JCEF é…ç½®**
```kotlin
val cefApp = CefAppBuilder().build()
val browser = client.createBrowser(url, false, false)
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| é¦–æ¬¡å¯åŠ¨æ—¶é—´ | ~60ç§’ï¼ˆå« JCEF ä¸‹è½½ï¼‰ |
| åç»­å¯åŠ¨æ—¶é—´ | ~10ç§’ |
| å†…å­˜å ç”¨ | ~190MB |
| Chromium ç‰ˆæœ¬ | 122.0.6261.112 |
| JVM ç‰ˆæœ¬ | 17 |
| çª—å£åˆ†è¾¨ç‡ | 1200x800 |

## ğŸ› é—®é¢˜æ’æŸ¥

### çª—å£æœªæ˜¾ç¤ºï¼Ÿ
```bash
# æ£€æŸ¥è¿›ç¨‹
ps aux | grep MainKt

# æ£€æŸ¥ç«¯å£
lsof -i:8080
lsof -i:8083

# æŸ¥çœ‹æ—¥å¿—
./gradlew :desktopApp:run
```

### IllegalAccessErrorï¼Ÿ
ç¡®ä¿ Gradle é…ç½®ä¸­åŒ…å« JVM å‚æ•°ï¼ˆå·²è‡ªåŠ¨é…ç½®ï¼‰

### é¡µé¢ç©ºç™½ï¼Ÿ
1. ç¡®è®¤ dev server (8083) æ­£åœ¨è¿è¡Œ
2. ç¡®è®¤ h5App (8080) æ­£åœ¨è¿è¡Œ
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ˆæœªæ¥ç‰ˆæœ¬å°†æ”¯æŒ DevToolsï¼‰

## ğŸ“ å¼€å‘æ—¥å¿—

```
âœ… 2025-10-01 20:51 - JCEF ä¸‹è½½å®Œæˆ (200MB)
âœ… 2025-10-01 20:51 - çª—å£æˆåŠŸå¯åŠ¨
âœ… 2025-10-01 20:56 - ä¿®å¤ Java 17 æ¨¡å—æƒé™é—®é¢˜
âœ… 2025-10-01 20:56 - åº”ç”¨ç¨³å®šè¿è¡Œ
```

## ğŸ‰ ä¸‹ä¸€æ­¥

1. **é›†æˆå®Œæ•´ä¸šåŠ¡é€»è¾‘**ï¼ˆéœ€è§£å†³ä¾èµ–é—®é¢˜ï¼‰
   - å¯ç”¨ `demo` æ¨¡å—ä¾èµ–
   - é›†æˆ `BridgeManager`
   - åˆå§‹åŒ– `KuiklyCoreEntry`

2. **å¼€å‘è€…å·¥å…·**
   - å¯ç”¨ Chromium DevTools
   - æ·»åŠ æ—¥å¿—é¢æ¿

3. **æ‰“åŒ…åˆ†å‘**
   - åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶
   - æ”¯æŒ Windows/macOS/Linux

4. **æ€§èƒ½ä¼˜åŒ–**
   - å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–
   - å†…å­˜å ç”¨ä¼˜åŒ–

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å®Œæ•´æ–‡æ¡£](./README.md)
- [éœ€æ±‚æ–‡æ¡£](../feature/preview.md)
- [ä¸»é¡¹ç›® README](../README.md)

---

**ğŸŠ æ­å–œï¼Kuikly Desktop å·²æˆåŠŸè¿è¡Œï¼**

æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿æŸ¥çœ‹æ—¥å¿—æˆ–æäº¤ Issueã€‚


